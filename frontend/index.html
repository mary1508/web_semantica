<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DB2LinkedData - Sistema de Alineación RDF</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>DB2LinkedData</h1>
            <p>Sistema de Alineación de Datos Relacionales a RDF</p>
        </header>

        <nav class="tabs">
            <button class="tab active" onclick="showTab('connection')">
                Conexión
            </button>
            <button class="tab" onclick="showTab('schema')">
                Esquema
            </button>
            <button class="tab" onclick="showTab('mapping')">
                Mapeo
            </button>
            <button class="tab" onclick="showTab('export')">
                Exportar
            </button>
        </nav>

        <section id="tab-connection" class="tab-content active">
            <div class="card">
                <h2>Conexión a Base de Datos</h2>
                <p class="subtitle">Configura los parámetros de conexión a PostgreSQL</p>
                
                <form id="connectionForm">
                    <div class="form-group">
                        <label for="dbHost">Host:</label>
                        <input type="text" id="dbHost" value="localhost" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="dbPort">Puerto:</label>
                        <input type="number" id="dbPort" value="5432" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="dbName">Base de Datos:</label>
                        <input type="text" id="dbName" placeholder="nombre_bd" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="dbUser">Usuario:</label>
                        <input type="text" id="dbUser" value="postgres" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="dbPassword">Contraseña:</label>
                        <input type="password" id="dbPassword" required>
                    </div>

                    <button type="submit" class="btn btn-primary">
                        Conectar
                    </button>
                </form>

                <div id="connectionStatus" class="status-box" style="display: none;"></div>
            </div>
        </section>

        <section id="tab-schema" class="tab-content">
            <div class="card">
                <h2>Esquema de Base de Datos</h2>
                <p class="subtitle">Visualización de tablas y columnas</p>
                
                <button id="loadSchemaBtn" class="btn btn-secondary" onclick="loadSchema()">
                    Cargar Esquema
                </button>

                <div id="schemaViewer" class="schema-viewer"></div>
            </div>
        </section>

        <section id="tab-mapping" class="tab-content">
            <div class="card">
                <h2>Generación de Mapeo</h2>
                <p class="subtitle">Transformación de datos relacionales a RDF</p>
                
                <div class="mapping-options">
                    <button class="btn btn-primary" onclick="generateDirectMapping()">
                        Direct Mapping Automático
                    </button>
                    
                    <button class="btn btn-secondary" onclick="customizeMapping()">
                        Personalizar Mapeo R2RML
                    </button>
                </div>

                <div class="form-group">
                    <label for="baseNamespace">Namespace Base:</label>
                    <input type="text" id="baseNamespace" value="http://ejemplo.org/" 
                           placeholder="http://dominio.org/">
                </div>

                <div id="mappingProgress" class="progress-box" style="display: none;">
                    <div class="spinner"></div>
                    <p>Generando mapeo...</p>
                </div>

                <div id="mappingResult" class="result-box" style="display: none;"></div>
            </div>
        </section>

        <section id="tab-export" class="tab-content">
            <div class="card">
                <h2>Exportación de Datos</h2>
                <p class="subtitle">Descarga o publica los datos enlazados</p>
                
                <div class="export-options">
                    <h3>Formato:</h3>
                    <select id="exportFormat" class="form-control">
                        <option value="turtle">Turtle (.ttl)</option>
                        <option value="rdfxml">RDF/XML (.rdf)</option>
                        <option value="jsonld">JSON-LD (.jsonld)</option>
                        <option value="ntriples">N-Triples (.nt)</option>
                    </select>

                    <button class="btn btn-success" onclick="downloadRDF()">
                        Descargar RDF
                    </button>

                    <button class="btn btn-secondary" onclick="publishToFuseki()">
                        Publicar en Fuseki
                    </button>
                </div>

                <div id="exportStatus" class="status-box" style="display: none;"></div>

                <div class="stats-box" id="statsBox" style="display: none;">
                    <h3>Estadísticas</h3>
                    <div id="statsContent"></div>
                </div>
            </div>
        </section>

    </div>

    <script src="js/app.js"></script>
</body>
</html>